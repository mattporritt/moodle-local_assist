define("local_assist/modal",["exports","core/modal","core/modal_events","local_assist/loading"],(function(_exports,_modal,_modal_events,_loading){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.updateModalContent=_exports.modalExists=_exports.isModalEvent=_exports.hideLoading=_exports.displayModal=_exports.displayLoading=void 0,_modal=_interopRequireDefault(_modal),_modal_events=_interopRequireDefault(_modal_events);class AssistModal extends _modal.default{registerEventListeners(){super.registerEventListeners(),this.registerCloseOnSave(),this.registerCloseOnCancel()}}_defineProperty(AssistModal,"TYPE","local_assist/modal"),_defineProperty(AssistModal,"TEMPLATE","local_assist/modal");let root=null;_exports.displayModal=async(hiddenCallback,title,showLoading)=>{const modalObject=await AssistModal.create({large:!0,templateContext:{classes:"local-assist-modal-dimensions"}});modalObject.setTitle(title);const modalroot=await modalObject.getRoot();root=modalroot[0],await modalObject.show(),showLoading&&displayLoading(),modalroot.on(_modal_events.default.hidden,(()=>{hiddenCallback(),modalObject.destroy()})),root.addEventListener("click",(e=>{const submitBtn=e.target.closest('[data-action="generate"]'),insertBtn=e.target.closest('[data-action="inserter"]');submitBtn?e.preventDefault():insertBtn&&(e.preventDefault(),modalObject.destroy())}))};_exports.modalExists=()=>null!==document.getElementById("local_assist-modal");_exports.isModalEvent=event=>{let element=event.target;for(;element;){if(element.classList.contains("modal"))return!0;element=element.parentElement}return!1};const displayLoading=()=>{const loadingSpinnerDiv=root.querySelector("#local_assist_spinner"),overlayDiv=root.querySelector("#local_assist_overlay"),blurDiv=root.querySelector("#local_assist_blur"),loadingTextDiv=root.querySelector("#local_assist_loading_text");(0,_loading.loadingMessages)(loadingTextDiv),loadingSpinnerDiv.classList.remove("hidden"),overlayDiv.classList.remove("hidden"),blurDiv.classList.add("local-assist-blur")};_exports.displayLoading=displayLoading;_exports.hideLoading=()=>{const loadingSpinnerDiv=root.querySelector("#local_assist_spinner"),overlayDiv=root.querySelector("#local_assist_overlay"),blurDiv=root.querySelector("#local_assist_blur");loadingSpinnerDiv.classList.add("hidden"),overlayDiv.classList.add("hidden"),blurDiv.classList.remove("local-assist-blur")};_exports.updateModalContent=bodyContent=>{root.querySelector("#local_assist_response_content").innerHTML=bodyContent}}));

//# sourceMappingURL=modal.min.js.map